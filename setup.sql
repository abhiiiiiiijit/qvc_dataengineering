create database QVC
GO
CREATE TABLE [dbo].[ARTICLE]
(
	[PID_ARTICLE] VARCHAR(50) NOT NULL PRIMARY KEY, 
    [FID_CATEGORY] VARCHAR(10) NULL,
	[FID_PARENT_ARTICLE] VARCHAR(50) NULL, 
	[PID_PARTS_LIST] VARCHAR(25) NULL,
    [ERP_NUMBER] VARCHAR(75) NULL, 
	[NAME] VARCHAR(255) NULL, 
	CONSTRAINT [FK_ARTICLE_ARTICLE] FOREIGN KEY ([FID_PARENT_ARTICLE]) REFERENCES [ARTICLE]([PID_ARTICLE]), 
)


	CREATE UNIQUE NONCLUSTERED INDEX [IX_ARTICLE_PARTS_LIST] ON [dbo].[ARTICLE] ([PID_PARTS_LIST]) WHERE [PID_PARTS_LIST] IS NOT NULL;

------------------------------------------------------------------------------ ORDER_ITEM ( PID_ORDER_ITEM, FID_ARTICLE, UNTS, UNITPRICE, FID_ORDERS) 

CREATE TABLE [dbo].[ORDER_ITEM]
(
	[ID_ORDER_ITEM] BIGINT NOT NULL PRIMARY KEY IDENTITY,
	[PID_ORDER_ITEM] VARCHAR(50) NULL, 
    [FID_ORDERS] VARCHAR(25) NOT NULL, 
    [FID_ARTICLE] VARCHAR(50) NULL, 
	[UNTS] INT NULL, 
    [UNITPRICE] DECIMAL(14, 4) NULL

)
------------------------------------------------------------------------------  ORDERS (PID_ORDER, ORDER_TIME) 

CREATE TABLE [dbo].[ORDERS]
(
	[PID_ORDER] VARCHAR(25) NOT NULL PRIMARY KEY,
    [ORDER_TIME] DATETIME NULL,
)

------------------------------------------------------------------------------- PARTS_LIST (FID_PARTS_LIST, FID_ARTICLE, UNITS)

CREATE TABLE [dbo].[PARTS_LIST]
(
	[ID_PARTS_LIST] BIGINT NOT NULL PRIMARY KEY IDENTITY,
	[FID_PARTS_LIST] VARCHAR(25) NOT NULL ,
    [FID_ARTICLE] VARCHAR(25) NOT NULL, 
    [UNITS] DECIMAL(10, 2) NOT NULL,
)

---------------------------------------------------- CATEGORY (PID_CATEGORY, FID_CATEGORY, FID_COMPANY, HIERARCHY_LEVEL, NAME)

CREATE TABLE [dbo].[CATEGORY]
(
	[PID_CATEGORY] VARCHAR(10) NOT NULL PRIMARY KEY, 
    [FID_CATEGORY] VARCHAR(10) NULL, 
	[FID_COMPANY] VARCHAR(50) NULL, 
    [HIERARCHY_LEVEL] SMALLINT NULL, 
    [NAME] VARCHAR(25) NULL, 
    CONSTRAINT [FK_CATEGORY_CATEGORY] FOREIGN KEY ([FID_CATEGORY]) REFERENCES [CATEGORY]([PID_CATEGORY]), 

)






INSERT INTO CATEGORY (PID_CATEGORY, FID_CATEGORY, FID_COMPANY, HIERARCHY_LEVEL, NAME)
VALUES
('BB-1'	,NULL	,'Bobs Blocks'	,1,'Blocks'),
('BB-2'	,'BB-1'	,'Bobs Blocks'	,2,'Special Blocks'),
('BB-3'	,'BB-1'	,'Bobs Blocks'	,2,'Simple Blocks')

INSERT INTO ARTICLE (PID_ARTICLE, FID_CATEGORY, FID_PARENT_ARTICLE, PID_PARTS_LIST, ERP_NUMBER, NAME)
VALUES
('BB-10001', 	'BB-1',NULL			,'BBPL-1000'	,'BB-BSSK'	,'BLOCKSET STARTER KIT'),
('BB-10002',	'BB-2',NULL			,NULL			,'BB-SB'	,'SQUARE BLOCK'),
('BB-10003',	'BB-2','BB-10002'	,NULL			,'BB-SBR'	,'RED'),
('BB-10004',	'BB-2','BB-10002'	,NULL			,'BB-SBB'	,'BLUE'),
('BB-10005',	'BB-2','BB-10002'	,NULL			,'BB-SBG'	,'GREEN'),
('BB-10006',	'BB-3',NULL			,NULL			,'BB-StB'	,'Standard BLOCK')


INSERT INTO PARTS_LIST (FID_PARTS_LIST, FID_ARTICLE, UNITS)
VALUES
('BBPL-1000','BB-10003',5),
('BBPL-1000','BB-10004',6),
('BBPL-1000','BB-10005',4)

INSERT INTO ORDER_ITEM ( PID_ORDER_ITEM, FID_ARTICLE, UNTS, UNITPRICE, FID_ORDERS) 
VALUES
('BB-211131','BB-10001',1,33.42,'BB-83213'),
('BB-211132','BB-10002',2,2.28,'BB-83213'),
('BB-211133','BB-10003',3,4.42,'BB-83213'),

('BB-211134','BB-10002',5,2.28,'BB-83214'),
('BB-211135','BB-10004',1,1.11,'BB-83214'),

('BB-211136','BB-10001',2,33.42,'BB-83215'),

('BB-211137','BB-10002',2,2.28,'BB-83216'),
('BB-211138','BB-10005',3,6.19,'BB-83216'),
('BB-211139','BB-10003',1,4.42,'BB-83216'),
('BB-211140','BB-10004',6,1.11,'BB-83216'),
('BB-211141','BB-10001',8,33.42,'BB-83216'),

('BB-211142','BB-10002',2,2.28,'BB-83217'),
('BB-211143','BB-10003',1,4.42,'BB-83217'),
('BB-211144','BB-10006',3,3.95,'BB-83217'),

('BB-211145','BB-10006',1,3.95,'BB-83218'),

('BB-211146','BB-10002',8,2.28,'BB-83219'),

('BB-211147','BB-10001',2,33.42,'BB-83220'),

('BB-211148','BB-10003',3,4.42,'BB-83221'),

('BB-211149','BB-10004',5,1.11,'BB-83222'),

('BB-211150','BB-10004',1,1.11,'BB-83223')

INSERT INTO ORDERS (PID_ORDER, ORDER_TIME) 
VALUES
('BB-83223','2019-01-05 14:00:08'),
('BB-83222','2019-01-04 14:00:08'),
('BB-83221','2019-01-02 14:00:08'),
('BB-83220','2019-01-02 14:00:08'),
('BB-83219','2019-01-02 14:00:08'),
('BB-83218','2019-01-01 14:00:08'),
('BB-83217','2018-12-30 14:00:08'),
('BB-83216','2018-12-29 14:00:08'),
('BB-83215','2018-12-28 14:00:08'),
('BB-83214','2018-12-27 14:00:08'),
('BB-83213','2018-12-26 14:00:08')


